{"ast":null,"code":"import _regeneratorRuntime from\"D:/MERN/Login - Logout/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/MERN/Login - Logout/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"D:/MERN/Login - Logout/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/MERN/Login - Logout/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/MERN/Login - Logout/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// import { Button, Flex, FormControl, Heading, Stack, VStack } from '@chakra-ui/react'\nimport{Button,Flex,VStack,FormControl,Heading,Stack,FormLabel,Input,InputGroup,InputRightElement}from'@chakra-ui/react';import{React,useState}from'react';import{authenticateUser,signOnService}from'../services/login';import{useNavigate}from'react-router-dom';import AlertItem from'../components/Alert';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialUser={email:'',name:'',password:'',isMember:true};var LoginP=function LoginP(){// for user\nvar navigate=useNavigate();var _useState=useState(initialUser),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var handleUser=function handleUser(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};// toggle between login and user page\nvar toggleMember=function toggleMember(){setUser(_objectSpread(_objectSpread({},user),{},{isMember:!user.isMember}));};// checking if already logged in\nvar userAlreadyLoggedIn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$authenticateUs,status;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return authenticateUser('/login');case 2:_yield$authenticateUs=_context.sent;status=_yield$authenticateUs.status;if(status===200){setAlert({showAlert:true,msg:'Redirecting to Dashboard',heading:'Authorized',type:'success'});setTimeout(function(){navigate('/dashboard');},3000);}case 5:case\"end\":return _context.stop();}},_callee);}));return function userAlreadyLoggedIn(){return _ref.apply(this,arguments);};}();useState(function(){userAlreadyLoggedIn();});// alert variable\nvar _useState3=useState({showAlert:false,msg:'',heading:'',type:''}),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];// const displayAlert = (newAlert) => {\n//   setAlert({...alert, newAlert})\n// }\n//submit\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return signOnService(user);case 3:response=_context2.sent;setAlert({showAlert:true,msg:response.data.msg?response.data.msg:response.data.errors[0].msg,heading:response.data.heading?response.data.heading:'Invalid Credentials',type:response.status===200?'success':'error'});if(alert.msg==='Invalid value')setAlert(_objectSpread(_objectSpread({},alert),{},{msg:'Enter valid email address'}));if(response.status===200){console.log('user is successfully signed up');if(user.isMember){setAlert({showAlert:true,msg:response.data.msg.msg,heading:response.data.msg.heading,type:'success'});setTimeout(function(){navigate('/dashboard');},4000);}else{}}else{setTimeout(function(){setAlert(_objectSpread(_objectSpread({},alert),{},{showAlert:false}));},5000);}case 7:case\"end\":return _context2.stop();}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();// for passwords\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),show=_useState6[0],setShow=_useState6[1];var handleShow=function handleShow(){return setShow(!show);};return/*#__PURE__*/_jsx(Flex,{alignItems:'flexed-top',marginTop:\"7%\",justifyContent:'center',children:/*#__PURE__*/_jsx(VStack,{children:/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(Heading,{textAlign:'center',children:user.isMember?'Login':'Register'}),alert.showAlert&&/*#__PURE__*/_jsx(AlertItem,{alert:alert}),/*#__PURE__*/_jsx(Stack,{marginTop:'2%',children:!user.isMember&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Name\"}),/*#__PURE__*/_jsx(Input,{name:\"name\",type:\"text\",value:user.name,onChange:handleUser})]})}),/*#__PURE__*/_jsxs(Stack,{marginTop:'3%',children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Email address\"}),/*#__PURE__*/_jsx(Input,{name:\"email\",type:\"email\",value:user.email,onChange:handleUser})]}),/*#__PURE__*/_jsxs(Stack,{marginTop:'5%',children:[/*#__PURE__*/_jsx(FormLabel,{children:\"Password\"}),/*#__PURE__*/_jsxs(InputGroup,{size:\"md\",children:[/*#__PURE__*/_jsx(Input,{name:\"password\",pr:\"4.5rem\",type:show?'text':'password',placeholder:\"Enter password\",value:user.password,onChange:handleUser}),/*#__PURE__*/_jsx(InputRightElement,{width:\"4.5rem\",children:/*#__PURE__*/_jsx(Button,{h:\"1.75rem\",size:\"sm\",onClick:handleShow,children:show?'Hide':'Show'})})]})]}),/*#__PURE__*/_jsx(Button,{colorScheme:\"orange\",marginTop:'2%',onClick:handleSubmit,children:\"Submit\"}),/*#__PURE__*/_jsx(Button,{colorScheme:'teal',variant:\"ghost\",float:'right',marginTop:\"2%\",onClick:toggleMember,children:!user.isMember?'Already a member? Login Here':'Not a member yet? Register Here'})]})})});};export default LoginP;","map":{"version":3,"names":["Button","Flex","VStack","FormControl","Heading","Stack","FormLabel","Input","InputGroup","InputRightElement","React","useState","authenticateUser","signOnService","useNavigate","AlertItem","initialUser","email","name","password","isMember","LoginP","navigate","user","setUser","handleUser","e","target","value","toggleMember","userAlreadyLoggedIn","status","setAlert","showAlert","msg","heading","type","setTimeout","alert","handleSubmit","preventDefault","response","data","errors","console","log","show","setShow","handleShow"],"sources":["D:/MERN/Login - Logout/client/src/pages/Login.jsx"],"sourcesContent":["// import { Button, Flex, FormControl, Heading, Stack, VStack } from '@chakra-ui/react'\r\nimport {\r\n  Button,\r\n  Flex,\r\n  VStack,\r\n  FormControl,\r\n  Heading,\r\n  Stack,\r\n  FormLabel,\r\n  Input,\r\n  InputGroup,\r\n  InputRightElement,\r\n} from '@chakra-ui/react';\r\nimport { React, useState } from 'react';\r\nimport { authenticateUser, signOnService } from '../services/login';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport AlertItem from '../components/Alert';\r\n\r\nconst initialUser = {\r\n  email: '',\r\n  name: '',\r\n  password: '',\r\n  isMember: true,\r\n};\r\n\r\nconst LoginP = () => {\r\n  // for user\r\n  const navigate = useNavigate();\r\n  const [user, setUser] = useState(initialUser);\r\n  const handleUser = e => {\r\n    setUser({ ...user, [e.target.name]: e.target.value });\r\n  };\r\n  // toggle between login and user page\r\n  const toggleMember = () => {\r\n    setUser({ ...user, isMember: !user.isMember });\r\n  };\r\n  // checking if already logged in\r\n\r\n  const userAlreadyLoggedIn = async () => {\r\n    const { status } = await authenticateUser('/login');\r\n\r\n    if (status === 200) {\r\n      setAlert({\r\n        showAlert: true,\r\n        msg: 'Redirecting to Dashboard',\r\n        heading: 'Authorized',\r\n        type: 'success',\r\n      });\r\n      setTimeout(() => {\r\n        navigate('/dashboard');\r\n      }, 3000);\r\n    }\r\n  };\r\n  useState(() => {\r\n    userAlreadyLoggedIn();\r\n  });\r\n  // alert variable\r\n  const [alert, setAlert] = useState({\r\n    showAlert: false,\r\n    msg: '',\r\n    heading: '',\r\n    type: '',\r\n  });\r\n  // const displayAlert = (newAlert) => {\r\n  //   setAlert({...alert, newAlert})\r\n  // }\r\n  //submit\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const response = await signOnService(user);\r\n\r\n    setAlert({\r\n      showAlert: true,\r\n      msg: response.data.msg ? response.data.msg : response.data.errors[0].msg,\r\n      heading: response.data.heading\r\n        ? response.data.heading\r\n        : 'Invalid Credentials',\r\n      type: response.status === 200 ? 'success' : 'error',\r\n    });\r\n    if (alert.msg === 'Invalid value')\r\n      setAlert({ ...alert, msg: 'Enter valid email address' });\r\n    if (response.status === 200) {\r\n      console.log('user is successfully signed up');\r\n\r\n      if (user.isMember) {\r\n        setAlert({\r\n          showAlert: true,\r\n          msg: response.data.msg.msg,\r\n          heading: response.data.msg.heading,\r\n          type: 'success',\r\n        });\r\n\r\n        setTimeout(() => {\r\n          navigate('/dashboard');\r\n        }, 4000);\r\n      } else {\r\n      }\r\n    } else {\r\n      setTimeout(() => {\r\n        setAlert({\r\n          ...alert,\r\n          showAlert: false,\r\n        });\r\n      }, 5000);\r\n    }\r\n  };\r\n  // for passwords\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(!show);\r\n  return (\r\n    <Flex alignItems={'flexed-top'} marginTop=\"7%\" justifyContent={'center'}>\r\n      <VStack>\r\n        <FormControl>\r\n          {/* heading  */}\r\n          <Heading textAlign={'center'}>\r\n            {user.isMember ? 'Login' : 'Register'}\r\n          </Heading>\r\n\r\n          {/* alert */}\r\n          {alert.showAlert && <AlertItem alert={alert} />}\r\n\r\n          {/* name for registration */}\r\n          <Stack marginTop={'2%'}>\r\n            {!user.isMember && (\r\n              <>\r\n                <FormLabel>Name</FormLabel>\r\n                <Input\r\n                  name=\"name\"\r\n                  type=\"text\"\r\n                  value={user.name}\r\n                  onChange={handleUser}\r\n                />\r\n              </>\r\n            )}\r\n          </Stack>\r\n\r\n          {/* email */}\r\n          <Stack marginTop={'3%'}>\r\n            <FormLabel>Email address</FormLabel>\r\n            <Input\r\n              name=\"email\"\r\n              type=\"email\"\r\n              value={user.email}\r\n              onChange={handleUser}\r\n            />\r\n          </Stack>\r\n\r\n          {/* password */}\r\n          <Stack marginTop={'5%'}>\r\n            <FormLabel>Password</FormLabel>\r\n            <InputGroup size=\"md\">\r\n              <Input\r\n                name=\"password\"\r\n                pr=\"4.5rem\"\r\n                type={show ? 'text' : 'password'}\r\n                placeholder=\"Enter password\"\r\n                value={user.password}\r\n                onChange={handleUser}\r\n              />\r\n              <InputRightElement width=\"4.5rem\">\r\n                <Button h=\"1.75rem\" size=\"sm\" onClick={handleShow}>\r\n                  {show ? 'Hide' : 'Show'}\r\n                </Button>\r\n              </InputRightElement>\r\n            </InputGroup>\r\n          </Stack>\r\n\r\n          {/* Submit */}\r\n          <Button colorScheme=\"orange\" marginTop={'2%'} onClick={handleSubmit}>\r\n            Submit\r\n          </Button>\r\n\r\n          {/* Toggle button */}\r\n          <Button\r\n            colorScheme={'teal'}\r\n            variant=\"ghost\"\r\n            float={'right'}\r\n            marginTop=\"2%\"\r\n            onClick={toggleMember}\r\n          >\r\n            {!user.isMember\r\n              ? 'Already a member? Login Here'\r\n              : 'Not a member yet? Register Here'}\r\n          </Button>\r\n        </FormControl>\r\n      </VStack>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nexport default LoginP;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}